#!/bin/csh

# test file for ECM
#
# Copyright 2002, 2003 Alexander Kruppa and Paul Zimmermann.
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by the
# Free Software Foundation; either version 2 of the License, or (at your
# option) any later version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
# more details.
#
# You should have received a copy of the GNU General Public License along
# with this program; see the file COPYING.  If not, write to the Free
# Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
# 02111-1307, USA.

set ECM="$1"
echo 291310394389387 | $ECM -power 3 2000 40
echo 3533000986701102061387017352606588294716061 | $ECM 167 3547 211
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 449590253344339769860648131841615148645295989319968106906219761704350259884936939123964073775456979170209297434164627098624602597663490109944575251386017 | $ECM 206564 63844855 20658299
# 241421225374647262615077397
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 17061648125571273329563156588435816942778260706938821014533 | $ECM 174000 585928442
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 89101594496537524661600025466303491594098940711325290746374420963129505171895306244425914080753573576861992127359576789001 | $ECM 325001 877655087 1032299
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 5394204444759808120647321820789847518754252780933425517607611172590240019087317088600360602042567541009369753816111824690753627535877960715703346991252857 | $ECM 345551 805816989
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 242668358425701966181147598421249782519178289604307455138484425562807899 | $ECM 854975 1417477358 85510503
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 3923385745693995079670229419275984584311007321932374190635656246740175165573932140787529348954892963218868359081838772941945556717 | $ECM 141667 876329474 150814537
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo 124539923134619429718018353168641490719788526741873602224103589351798060075728544650990190016536810151633233676972068237330360238752628542584228856301923448951 | $ECM 1260317 1604840403 24289207
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
# for ecm3, g1=4043946241 divides 484984500^120-17923^120
# doesn't work with Dickson(60)
echo 5735013127104523546495917836490637235369 | $ECM -power 60 330000 3848610099745584498259560038340842096471 500000000 2527419713481530878734189429997880136878
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
# g1=1805746381 divides 1577240280^12-349^12, doesn't work with Dickson
# warning: depends on the value of d chosen in stage 2
# works with -k 2 (d=92820), -k 3 (d=78540)
echo 17833653493084084667826559287841287911473 | $ECM -power 6 -k 2 389797 7423036368129288563912180723909655170075 16e8 9011819881065862648414808987718432766274
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
# g1=1822795201 divides 185550750^30-25009^30, doesn't work with Dickson
echo 212252637915375215854013140804296246361 | $ECM -power 15 3000000 781683988
if ($status != 0) then
   echo "############### ERROR ###############";
   exit 1;
endif
echo "The tests passed."
